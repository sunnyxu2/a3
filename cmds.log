 1145  for FILE in CUSTOMERS-A3/*.txt; do median=$(awk '{if ($3>0){printf "%s\t%s\n",$1,$2/$3} else {printf "%s\t0\n",$1}}' < $FILE | sort -k 2 -n | awk '{a[i++]=$2;} END {print a[int(i/2)];}'); awk -v median=$median '{if ($3>0){ if ($2/$3 > median){printf "%s\t%s\n",$1,$2/$3} else {printf "%s\t0\n",$1}} else {printf "%s\t0\n",$1}}' < $FILE > CUSTOMERS-A3/$(basename $FILE .txt).BINARY.txt; done
 1146  for FILE in PRODUCTS-A3/*.txt; do median=$(awk '{if ($3>0){printf "%s\t%s\n",$1,$2/$3} else {printf "%s\t0\n",$1}}' < $FILE | sort -k 2 -n | awk '{a[i++]=$2;} END {print a[int(i/2)];}'); awk -v median=$median '{if ($3>0){ if ($2/$3 > median){printf "%s\t%s\n",$1,$2/$3} else {printf "%s\t0\n",$1}} else {printf "%s\t0\n",$1}}' < $FILE > PRODUCTS-A3/$(basename $FILE .txt).BINARY.txt; done
 1147  for FILE in CUSTOMERS-A3/*.BINARY.txt; do corr=$(./datamash-1.3/datamash -W ppearson 1:2 < $FILE); printf "%s\t%s\n" "$(basename $FILE)" "$corr" >> A3-top100customers-norm.txt ; done
 1148  for FILE in PRODUCTS-A3/*.BINARY.txt; do corr=$(./datamash-1.3/datamash -W ppearson 1:2 < $FILE); printf "%s\t%s\n" "$(basename $FILE)" "$corr" >> A3-top100products-norm.txt ; done
 1149  sort -k 2 -n -r A3-top100customers-norm.txt | head -n 1
 1150  sort -k 2 -n -r A3-top100products-norm.txt | head -n 1
 1151  history > a3/cmds.log

 1258  sed -r 's/\b\w{1,2}\b//g' PRODUCTS/0439139597.SANITIZED.txt > 0439139597.TRIMMED.txt
 1260  paste -d "\t" PRODUCTS-A3/0439139597.BINARY.txt 0439139597.TRIMMED.txt > 0439139597.REMERGED.txt
 1262  awk -F "\t" '{split($3, words, " "); for (i=1;i<=length(words);i++) { if ($2==0) { count[words[i]]+=1;}}} END {for (key in count) {printf("%s\t%s\n", key, count[key])}}' 0439139597.REMERGED.txt | sort -k 2 -n -r | head -n 10
 1263  awk -F "\t" '{split($3, words, " "); for (i=1;i<=length(words);i++) { if ($2==1) { count[words[i]]+=1;}}} END {for (key in count) {printf("%s\t%s\n", key, count[key])}}' 0439139597.REMERGED.txt | sort -k 2 -n -r | head -n 10
 1264  history >> cmds.log

 1355  sed -r 's/\b(the(\s)?)\b//g' 0439139597.TRIMMED.txt > 0439139597.TRIMMEDMORE.txt
 1356  paste -d "\t" PRODUCTS-A3/0439139597.BINARY.txt 0439139597.TRIMMEDMORE.txt > 0439139597.REMERGED2.txt
 1357  awk -F "\t" '{split($3, words, " "); for (i=1;i<=length(words);i++) { if ($2==0) { count[words[i]]+=1;}}} END {for (key in count) {printf("%s\t%s\n", key, count[key])}}' 0439139597.REMERGED2.txt | sort -k 2 -n -r | head -n 10
 1358  awk -F "\t" '{split($3, words, " "); for (i=1;i<=length(words);i++) { if ($2==1) { count[words[i]]+=1;}}} END {for (key in count) {printf("%s\t%s\n", key, count[key])}}' 0439139597.REMERGED2.txt | sort -k 2 -n -r | head -n 10
 1359  history | tail -n 10 > a3/cmds3.log
